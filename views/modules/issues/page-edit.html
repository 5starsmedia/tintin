<div>


  <st-form model="item" state="error" submit="saveItem(item)">

    <st-header title="{{item._id ? 'Editing of issue' : 'New issue'}}">

      <button ng-disabled="loading" ng-class="{'m-progress': loading}" class="btn btn-primary btn-outline"
              type="submit">
        {{'Save'|translate}}
      </button>
      <a ui-sref="issues.list" class="btn btn-default">
        {{'Cancel'|translate}}
      </a>

    </st-header>

    <div class="content" animate-panel effect="zoomIn">

      <st-form-element label="{{'Coordinator'|translate}}" field="title">

        <select class="form-control" name="coordinator" ng-model="item.issueType" required ng-disabled="item._id"
                ng-options="type as type.title for type in types track by type._id"></select>

      </st-form-element>

      <st-form-element label="{{'Title'|translate}}" field="title">

        <input id="title" class="form-control" name="title" type="text" required
               ng-model="item.title"/>

      </st-form-element>

      <st-form-element label="{{'Status'|translate}}" field="title">

        <select class="form-control" name="status" ng-model="item.status" required ng-disabled="!item.issueType"
                ng-options="status as status.title for status in statuses track by status.title"></select>

      </st-form-element>

      <st-form-element label="{{'Body'|translate}}" field="body">
        <div editor-select-images="item.files" collection-name="issues" item-id="{{item._id}}">
          <textarea id="body" class="form-control" name="body" ckeditor="editorOptions"
                    ng-model="item.body"></textarea>

        </div>
      </st-form-element>


      <st-panel title="{{'Attachments'|translate}}">

        <div issue-attachment="item.attachments"></div>

      </st-panel>

    </div>

  </st-form>
</div>