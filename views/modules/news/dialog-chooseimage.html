<st-form model="widgetData" state="error" submit="ok()">    <div class="color-line"></div>    <div class="modal-header">        <button type="button" class="close" ng-click="close()" data-dismiss="modal" aria-hidden="true">&times;</button>        <h4 class="modal-title">{{'Image insertion'|translate}}</h4>        <small>{{'Attached images'|translate}}</small>    </div>    <div class="modal-body" bz-loading-container="loading">        <div ng-if="error" class="alert alert-danger">Something wrong</div>        <tabset class="hpanel">            <tab>                <tab-heading>{{'Image'|translate}}</tab-heading>                <div class="panel-body">                    <ul class="fu-list row">                        <li class="fu-item col-sm-3 col-xs-6" ng-repeat="file in images"                            ng-class="{'fu-item_selected':selectedFile._id === file._id}">                            <img class="fu-item__image fu-item__image_select" title="{{'Insert image'|translate}}"                                 ng-src="/api/files/{{file._id}}?width=100&height=100"                                 ng-click="onFileSelect(file)"/>                            <span class="file-title">{{file.title}}</span>                        </li>                    </ul>                </div>                <cs-file-upload ng-if="itemId" resource-id="{{itemId}}" collection-name="{{collectionName}}" files="images"></cs-file-upload>            </tab>            <tab active="showAttributes">                <tab-heading>{{'Attributes'|translate}}</tab-heading>                <div class="panel-body">                <st-form-element label="{{'Title'|translate}}" field="alt">                    <input type="text" class="form-control" ng-model="widgetData.alt"/>                </st-form-element>                <st-form-element field="hasCaption">                    <label>                        <input icheck type="checkbox" ng-model="widgetData.hasCaption" />                        {{'Show caption under image'|translate}}                    </label>                </st-form-element>                <st-form-element label="{{'Image align'|translate}}" field="align">                    <div class="clearfix"></div>                    <div class="btn-group">                        <button type="button" ng-class="{'active': widgetData.align == 'none'}" ng-click="widgetData.align = 'none'" class="btn btn-default">                            {{'None'|translate}}                        </button>                        <button type="button" ng-class="{'active': widgetData.align == 'left'}" ng-click="widgetData.align = 'left'" class="btn btn-default">                            <span class="fa fa-align-left"></span>                            {{'Left'|translate}}                        </button>                        <button type="button" ng-class="{'active': widgetData.align == 'center'}" ng-click="widgetData.align = 'center'" class="btn btn-default">                            <span class="fa fa-align-center"></span>                            {{'Center'|translate}}                        </button>                        <button type="button" ng-class="{'active': widgetData.align == 'right'}" ng-click="widgetData.align = 'right'" class="btn btn-default">                            <span class="fa fa-align-right"></span>                            {{'Right'|translate}}                        </button>                    </div>                </st-form-element>                    <div class="row">                        <div class="col-xs-9">                            <st-form-element label="{{'Image size'|translate}}" field="width">                                <div class="clearfix"></div>                                <div class="btn-group">                                    <button type="button" ng-class="{'active': !widgetData.width && !isCustomWidth}" ng-click="setWidth(null)" class="btn btn-default">                                        Original                                    </button>                                    <button ng-repeat="size in imageSizes" type="button" ng-class="{'active': widgetData.width == size.width && !isCustomWidth}" ng-click="setWidth(size.width)" class="btn btn-default">                                        {{size.title}}                                    </button>                                    <button disabled type="button" ng-class="{'active': isCustomWidth}" ng-click="setCustom()" class="btn btn-default">                                        Custom                                    </button>                                </div>                            </st-form-element>                        </div>                        <div class="col-xs-3">                            <div class="form-inline" ng-show="isCustomWidth">                                <st-form-element field="isCustomWidth">                                    <label>Size</label><br/>                                    <div class="form-group">                                        <input type="text" style="width: 40px; padding: 2px;" maxlength="4" class="form-control text-center input-sm" ng-model="widgetData.width" disabled />                                        <label>x</label>                                        <input type="text" style="width: 40px; padding: 2px;" maxlength="4" class="form-control text-center input-sm" ng-model="widgetData.height" disabled />                                    </div>                                </st-form-element>                            </div>                        </div>                    </div>                    <div ng-show="widgetData.width">                        <st-form-element field="hasCaption">                            <label>                                <input icheck type="checkbox" ng-model="widgetData.hasPreview" />                                {{'Open image preview'|translate}}                            </label>                        </st-form-element>                    </div>                </div>            </tab>        </tabset>    </div>    <div class="modal-footer">        <button type="submit" class="btn btn-primary" ng-disabled="!selectedFile._id || loading" ng-class="{'m-progress': loading}">{{'OK'|translate}}</button>        <button type="button" class="btn btn-default" ng-click="close()" data-dismiss="modal">{{'Cancel'|translate}}</button>    </div></st-form>