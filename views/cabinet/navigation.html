<div id="navigation" ng-controller="UsersProfileBlockCtrl">
    <div class="profile-picture">
        <a class="b-profile__block m-b" ui-sref="profile.user.info({ username: _account.username })">
            <img ng-show="_account.imageUrl" ng-src="{{_account.imageUrl}}" class="img-circle" />
            <span class="b-profile__icon pe-7s-id"></span>
        </a>

        <div class="stats-label text-color">
            <span class="font-extra-bold font-uppercase">{{_account.title}}</span>

            <div class="dropdown" dropdown >
                <a dropdown-toggle class="dropdown-toggle" href="">
                    <small class="text-muted">{{currentRole.title}} <b class="caret"></b></small>
                </a>
                <ul class="dropdown-menu animated flipInY m-t-xs">
                    <li ng-show="_account.roles.length > 1" ng-repeat="role in _account.roles">
                        <a href="" ng-click="changeRole(role._id)">{{role.title}}</a>
                    </li>
                    <li ng-show="_account.roles.length > 1" class="divider"></li>
                    <li><a ui-sref="auth.logout">Logout</a></li>
                </ul>
            </div>

            <!--div class="small-chart m-t-sm" id="sparkline7"></div>
            <div sparkline spark-data="barProfileData" spark-options="barProfileOptions"></div>
            <div>
                <h4 class="font-extra-bold m-b-xs">
                    $260 104,200
                </h4>
                <small class="text-muted">Your income from the last year in sales product X.</small>
            </div-->
        </div>
    </div>

    <ul class="nav" id="side-menu">
        <li ng-class="{active: $state.includes(item.sref) || item.$expand}"
            ng-repeat="item in menu"
            ng-show="_account.has(item.permissions)">
            <a ng-show="!item.items.length" ui-sref="{{item.sref}}">
                <span class="nav-label">{{item.title}}</span>
            </a>
            <a ng-show="item.items.length" href="" ng-click="item.$expand = !item.$expand">
                <span class="nav-label">{{item.title}}</span>
                <span ng-if="item.items.length" class="fa arrow"></span>
            </a>
            <ul ng-show="$state.includes(item.sref) || item.items.length && item.$expand" class="nav nav-second-level" ng-class="{in: $state.includes(item.sref)}">
                <li ui-sref-active="active" ng-repeat="subitem in item.items">
                    <a ui-sref="{{subitem.sref}}">{{subitem.title}}</a>
                </li>
            </ul>
        </li>
    </ul>
</div>